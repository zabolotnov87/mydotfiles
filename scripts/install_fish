#!/bin/bash

set -e

BASE=$(pwd)

brew install fish || brew upgrade fish

mkdir -p ~/.config/fish
ln -sf $BASE/config.fish ~/.config/fish/config.fish

# Make fish default shell
if [ ! $(grep "fish" /etc/shells) ]; then
  sudo echo "/usr/local/bin/fish" >> /etc/shells
  chsh -s /usr/local/bin/fish
fi

# Install oh-my-fish
if [ ! -d ~/.local/share/omf ]; then
  curl -L https://get.oh-my.fish | fish
fi

if [ ! -f ~/.config.fish.local ]; then
  cat << EOF > ~/.config.fish.local
# Local config
EOF
fi
